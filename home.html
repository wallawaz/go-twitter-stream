<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TrumpDooDoo</title>
  <link href="https://fonts.googleapis.com/css?family=Libre+Baskerville" rel="stylesheet">
  <link href="/css/style.css" rel="stylesheet">
</head>
<body>
<h1>POTUS</h1>
<div id="main">
      <!--for demo wrap-->
      <table id="mainTable">
          <thead>
          <th class="ID"></th>
          <th class="CreatedAt"></th>
          <th class="Img"></th>
          <th class="User"></th>
          <th class="Text"></th>
        </thead>
          <tbody>
          </tbody>
        </div>
    </table>
  <!--<button onClick="addPoo()">ðŸ’©</button>-->
</div>

<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-2.2.4/dt-1.10.15/datatables.min.js"></script>
<script type="text/javascript" src="/js/scripts.js"></script>
<script type="text/javascript">

  const NUMROWS = 10;
  let conn;
  let TWEETCOUNTER = 0;
  const main = document.querySelector("#main");
  const imageURLs = [
        "https://media.giphy.com/media/GrrjFZpBkKVhe/giphy.gif",
        "https://media.giphy.com/media/12zaaelwao65KU/giphy.gif"
        //"https://images-na.ssl-images-amazon.com/images/I/31eN8Ro0TML.jpg"
  ];
window.onload = function() {
    const dt = $("#mainTable").DataTable({
        "paging": false,
        "scrollY": 300,
        "bInfo" : false,
        "columnDefs": [
          {"visible": false, "targets": 0 },
          {"visible": false, "targets": 1 }
          ]
    });
      if (window["WebSocket"]) {
          let conn = new WebSocket("ws://"+ document.location.host + "/ws");
          conn.onclose = function(evt) {
              let item = document.createElement("div");
              item.innerHTML = "<b>Connection closed</b>";
              main.appendChild(item);
          };
          conn.onmessage = function(evt) {
              tweet = JSON.parse(evt.data);
              updateTweets(tweet);
         };

      } else {
          let item = document.createElement("div");
          item.innerHTML = "<b>Your browser does not support WebSockets</b>";
          main.appendChild(item);
      }
}

</script>
</body>
</html>
